Object subclass: #Broker	instanceVariableNames: 'stations'	classVariableNames: ''	poolDictionaries: ''	category: 'Sensores-Practica4'!!Broker methodsFor: 'as yet unclassified' stamp: 'ArturoZambrano 4/24/2016 14:43'!send: aSymbol to: anObjectReference ^(stations at: anObjectReference ) perform: aSymbol ! !!Broker methodsFor: 'manage' stamp: 'ArturoZambrano 4/24/2016 14:33'!addStation:aWeatherStation stations at: aWeatherStation  name put: aWeatherStation ! !!Broker methodsFor: 'initialize' stamp: 'ArturoZambrano 4/24/2016 14:33'!initialize stations:=Dictionary new.! !Object subclass: #Station	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Sensores-Practica4'!!Station methodsFor: 'sensing' stamp: 'ema 4/29/2018 17:09'!humidity	^ SubclassResponsibility ! !!Station methodsFor: 'sensing' stamp: 'ema 4/30/2018 20:50'!temperature	^ SubclassResponsibility! !!Station methodsFor: 'sensing' stamp: 'ema 4/30/2018 20:50'!uvRadiation	^ SubclassResponsibility! !Object subclass: #WeatherCentral	instanceVariableNames: 'broker stations'	classVariableNames: ''	poolDictionaries: ''	category: 'Sensores-Practica4'!!WeatherCentral methodsFor: 'initialization' stamp: 'ema 4/30/2018 21:06'!initialize	super initialize.	stations := OrderedCollection new.	broker := Broker new! !!WeatherCentral methodsFor: 'adding' stamp: 'ema 4/30/2018 21:43'!temperaturaPromedio		^ (stations inject: 0 into: [ :sum :station | sum + station temperature ]) / stations size! !!WeatherCentral methodsFor: 'adding' stamp: 'ema 4/30/2018 20:54'!addStationNamed: stationName	| aWeatherStation |	aWeatherStation := WeatherStation named: stationName.	broker addStation: aWeatherStation.	stations add: (WeatherStationProxy wrap: aWeatherStation broker: broker named: stationName)! !!WeatherCentral methodsFor: 'adding' stamp: 'ema 4/30/2018 20:34'!maximaRadiacionUV	^ stations inject: -1 into: [ :max :station | max max: ( station uvRadiation  ) ]! !!WeatherCentral methodsFor: 'adding' stamp: 'ema 4/29/2018 03:44'!send: mensaje to: station	broker send: mensaje to: station	! !Station subclass: #WeatherStation	instanceVariableNames: 'random name'	classVariableNames: ''	poolDictionaries: ''	category: 'Sensores-Practica4'!!WeatherStation methodsFor: 'sensing' stamp: 'ArturoZambrano 4/24/2016 14:30'!temperature ^ random nextInt:50! !!WeatherStation methodsFor: 'sensing' stamp: 'ArturoZambrano 4/24/2016 14:47'!humidity thisContext sender receiver class=Broker ifFalse:[self error: 'Only a Broker can talk to a Station' ]. ^ random nextInt:100! !!WeatherStation methodsFor: 'sensing' stamp: 'ArturoZambrano 4/24/2016 14:30'!uvRadiation ^ random nextInt:40 ! !!WeatherStation methodsFor: 'initialization-release' stamp: 'ArturoZambrano 4/24/2016 14:30'!initialize  random:= Random new.! !!WeatherStation methodsFor: 'accessing' stamp: 'ArturoZambrano 4/24/2016 14:34'!name	^ name! !!WeatherStation methodsFor: 'accessing' stamp: 'ArturoZambrano 4/24/2016 14:34'!name: anObject	name := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!WeatherStation class	instanceVariableNames: ''!!WeatherStation class methodsFor: 'as yet unclassified' stamp: 'ArturoZambrano 4/24/2016 14:42'!named: aString ^self new name:aString; yourself.! !Station subclass: #WeatherStationProxy	instanceVariableNames: 'broker station reference'	classVariableNames: ''	poolDictionaries: ''	category: 'Sensores-Practica4'!!WeatherStationProxy methodsFor: 'sensing' stamp: 'ema 4/30/2018 21:00'!temperature	^ broker send: #temperature to: reference! !!WeatherStationProxy methodsFor: 'sensing' stamp: 'ema 4/30/2018 21:00'!humidity	^ broker send: #humidity to: reference! !!WeatherStationProxy methodsFor: 'sensing' stamp: 'ema 4/30/2018 21:00'!uvRadiation	^ broker send: #uvRadiation to: reference! !!WeatherStationProxy methodsFor: 'accessing' stamp: 'ema 4/29/2018 03:54'!station: unaEstacion	station := unaEstacion ! !!WeatherStationProxy methodsFor: 'accessing' stamp: 'ema 4/30/2018 20:56'!reference: aName	reference := aName! !!WeatherStationProxy methodsFor: 'accessing' stamp: 'ema 4/30/2018 20:46'!broker: unBroker	broker := unBroker! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!WeatherStationProxy class	instanceVariableNames: ''!!WeatherStationProxy class methodsFor: 'instance creation' stamp: 'ema 4/30/2018 20:55'!wrap: unaEstacion broker: unBroker named: aName	^ self new		station: unaEstacion;		broker: unBroker;		reference: aName ! !